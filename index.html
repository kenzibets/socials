<!doctype html>
<html lang="en">
<head>
  <!-- Page title -->
  <title>Socials</title>

  <!-- Basic meta -->
  <meta name="description" content="Use code SHAWTY for 100% luck."/>
  <link rel="icon" href="https://paa.ge/_next/image?url=https%3A%2F%2Flamaco-medusa.s3.eu-west-3.amazonaws.com%2F1760588927392-header-yz3HQ0.jpg&w=1920&q=75&dpl=dpl_51iekMun2Qd3ndP6hfGai6X55sXi" type="image/png">

  <!-- Open Graph (Facebook, Slack, Discord embeds, etc.) -->
  <meta property="og:title" content="Kenzie Ford" />
  <meta property="og:description" content="Use code SHAWTY for 100% luck. Enter the Basement!" />
  <meta property="og:image" content="https://github.com/kenzibets/socials/raw/main/rain.png" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Kenzie Ford" />
  <meta property="og:locale" content="en_US" />

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@kenzibettz" />
  <meta name="twitter:title" content="Kenzie Ford — RainBet Vibes" />
  <meta name="twitter:description" content="Use code SHAWTY for 100% luck. Enter the Basement for vibes, socials and a mini slot." />
  <meta name="twitter:image" content="https://paa.ge/_next/image?url=https%3A%2F%2Flamaco-medusa.s3.eu-west-3.amazonaws.com%2F1760588927392-header-yz3HQ0.jpg&w=1920&q=75&dpl=dpl_51iekMun2Qd3ndP6hfGai6X55sXi" />

  <!-- canonical URL (updated by JS on load to current location) -->
  <link rel="canonical" href="https://example.com/kenzie" />
  <!-- update og:url via JS if you want the meta to reflect the current location dynamically -->
  <meta property="og:url" content="https://example.com/kenzie" />

  <style>
  :root{
    --bg: #071028;
    --card-bg: linear-gradient(180deg, rgba(6,10,25,0.72), rgba(10,16,36,0.62));
    --muted: #a9b0c7;
    --accent: #ba0963;
    --accent-strong: #ff2b77;
    --soft-white: #f2f5fb;
    --shadow: rgba(16,33,110,0.18);
    --card-max-width: 1100px;
    --card-padding: 24px;
    --avatar-size: 96px;
    --scrollbar-width: 14px;
  }

  html,body{ min-height:100dvh; margin:0; padding:0; background:var(--bg); color:var(--soft-white); font-family:Inter,system-ui,Segoe UI,Roboto,Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

/* Background image + blur overlay */
  body::before{
    content: "";
    position: fixed; inset: 0; z-index: 0;
    background-image: url('kenzies_basement.png');
    background-size: cover; background-position: center center; background-repeat: no-repeat;
    transform: scale(1.03);
    filter: blur(10px) brightness(0.36) saturate(110%);
    pointer-events: none;
    transition: none;
  }
  body::after{
    content: "";
    position: fixed; inset: 0; z-index: 1;
    background: linear-gradient(180deg, rgba(3,6,20,0.6), rgba(6,9,28,0.7));
    pointer-events: none;
  }

  /* creep background animation (applies to body when .creep added) */
  @keyframes creepBG {
    0%   { transform: scale(1.03); filter: blur(10px) brightness(0.36) saturate(110%); }
    18%  { transform: scale(1.05); filter: blur(12px) brightness(0.20) saturate(80%); }
    30%  { transform: scale(1.09); filter: blur(2px)  brightness(1.6) saturate(140%); }
    46%  { transform: scale(1.06); filter: blur(8px)  brightness(0.16) saturate(60%); }
    64%  { transform: scale(1.04); filter: blur(10px) brightness(0.28) saturate(100%); }
    82%  { transform: scale(1.08); filter: blur(2px)  brightness(1.4) saturate(130%); }
    100% { transform: scale(1.03); filter: blur(10px) brightness(0.36) saturate(110%); }
  }
  body.creep::before {
    animation: creepBG 1600ms cubic-bezier(.2,.9,.2,1) forwards;
  }

  #particle-layer { position:fixed; inset:0; z-index:2; pointer-events:none; overflow:hidden; }
  #app { position:relative; z-index:3; min-height:100dvh; width:100%; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:18px; padding: calc(20px + env(safe-area-inset-top)) 20px calc(24px + env(safe-area-inset-bottom)); box-sizing:border-box; }

  /* card hidden initially until reveal animation finishes */
  .card { position:relative; z-index:4; width:min(var(--card-max-width), 96%); max-width:var(--card-max-width); padding:var(--card-padding); border-radius:16px; background:var(--card-bg); border:1px solid rgba(186,9,99,0.06); box-shadow: 0 28px 80px var(--shadow), inset 0 1px 0 rgba(255,255,255,0.02); display:flex; flex-direction:column; align-items:center; gap:16px; backdrop-filter: blur(6px) saturate(120%); transition: opacity 520ms cubic-bezier(.2,.9,.2,1), transform 520ms; }
  .card.hidden { opacity: 0; transform: scale(.995) translateY(8px); pointer-events: none; filter: blur(4px) brightness(.92); }
  .card.revealed { opacity:1; transform: none; pointer-events: auto; filter:none; }

  /* header */
  .header { width:100%; display:flex; gap:12px; align-items:center; justify-content:center; flex-direction:column; text-align:center; }
  .avatar { width:var(--avatar-size); height:var(--avatar-size); border-radius:14px; overflow:hidden; border:2px solid rgba(255,255,255,0.04); box-shadow: 0 8px 26px rgba(16,33,110,0.18); }
  .avatar img { width:100%; height:100%; object-fit:cover; display:block; }
  .title { color:var(--soft-white); font-size:clamp(18px,3.6vw,32px); letter-spacing:0.6px; display:flex; gap:12px; align-items:center; justify-content:center; font-weight:700; }
  .subtitle { color:var(--muted); font-size:12px; letter-spacing:1.6px; text-transform:uppercase; margin-top:2px; }

  .promo { display:inline-flex; gap:10px; align-items:center; padding:8px 12px; border-radius:999px; background: linear-gradient(90deg, rgba(186,9,99,0.12), rgba(16,33,110,0.06)); border:1px solid rgba(186,9,99,0.14); color:var(--accent-strong); font-weight:700; text-transform:uppercase; font-size:12px; box-shadow: 0 6px 24px rgba(186,9,99,0.06); animation: promoPulse 2.8s infinite ease-in-out; }
  @keyframes promoPulse{ 0%{ transform:scale(1);} 50%{ transform:scale(1.02);} 100%{ transform:scale(1);} }

  /* links grid */
  .links {
    width:100%; display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:12px; align-items:stretch;
    padding:12px; max-height: calc(100dvh - 420px); overflow-y:auto; -webkit-overflow-scrolling:touch; scrollbar-gutter: stable both-edges;
    padding-right: calc(var(--scrollbar-width) + 10px); box-sizing: border-box;
  }
  .links::-webkit-scrollbar { width:12px; }
  .links::-webkit-scrollbar-thumb { background: linear-gradient(180deg, rgba(186,9,99,0.26), rgba(255,43,119,0.18)); border-radius:999px; border:2px solid rgba(0,0,0,0.12); }

  .link { box-sizing: border-box; display:flex; align-items:center; gap:14px; padding:14px 18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04)); border:1px solid rgba(255,255,255,0.02); box-shadow: 0 10px 24px rgba(2,6,23,0.6); transition: transform 240ms cubic-bezier(.2,.9,.2,1), box-shadow 240ms; text-decoration:none; color:var(--soft-white); transform: translateY(18px); opacity:0; min-height:64px; align-self:stretch; will-change: transform, opacity; overflow: hidden; }
  .link.visible { transform:none; opacity:1; }

  .link .icon { width:54px; height:54px; min-width:54px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); display:flex; align-items:center; justify-content:center; border:1px solid rgba(255,255,255,0.02); overflow:hidden; transition: transform 220ms; }
  .link .icon img { width:28px; height:28px; object-fit:contain; }
  .meta { display:flex; flex-direction:column; align-items:flex-start; gap:6px; overflow:hidden; }
  .meta .label { font-size:14px; color:var(--accent-strong); font-weight:700; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; max-width:100%; }
  .meta .desc { font-size:12px; color:var(--muted); white-space:nowrap; text-overflow:ellipsis; overflow:hidden; max-width:100%; }

  /* single inline slot */
  .big-slot-inline { width:100%; max-width:820px; border-radius:12px; background: linear-gradient(180deg, rgba(6,10,20,0.86), rgba(10,16,36,0.86)); padding:10px; display:flex; gap:10px; align-items:center; justify-content:space-between; box-shadow: 0 18px 48px rgba(2,6,20,0.5); border:1px solid rgba(255,255,255,0.03); }
  .small-reel { width:120px; height:72px; background: linear-gradient(180deg,#07102a,#0d1b3a); border-radius:10px; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden; border:2px solid rgba(186,9,99,0.04); }
  .small-reel .strip { position:absolute; top:0; left:0; right:0; display:flex; flex-direction:column; align-items:center; gap:6px; padding-top:6px; transform: translateY(0); transition: transform 900ms cubic-bezier(.2,.9,.2,1); }
  .small-symbol { width:100%; height:72px; display:flex; align-items:center; justify-content:center; }
  .small-symbol img { height:64px; width:auto; display:block; object-fit:contain; }
  .small-spin { padding:10px 12px; border-radius:10px; background: linear-gradient(90deg,var(--accent),var(--accent-strong)); color:white; border:none; cursor:pointer; font-weight:800; min-width:110px; }

  /* corner coin */
  .roulette { position:absolute; right:14px; top:14px; width:46px; height:46px; z-index:6; border-radius:50%; display:flex; align-items:center; justify-content:center; border:2px solid rgba(255,255,255,0.03); background:transparent; box-shadow: 0 8px 28px rgba(16,33,110,0.28); transform-origin:center; transition: transform 260ms; opacity:0.98; }
  .roulette img { width:86%; height:86%; object-fit:contain; display:block; animation: spin 6s linear infinite; transform-origin:50% 50%; border-radius:50%; will-change: transform; }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  .roulette:hover { transform: scale(1.06) rotate(6deg); filter: drop-shadow(0 18px 48px rgba(186,9,99,0.08)); }

  /* overlay (enter view) — this is all the user sees until they press enter */
  #enterOverlay {
    position:fixed; inset:0; z-index:9999;
    display:flex; align-items:center; justify-content:center;
    background:linear-gradient(180deg, rgba(2,6,23,0.92), rgba(2,6,23,0.94));
    backdrop-filter: blur(4px);
    transition: opacity 420ms, visibility 420ms;
  }
  #enterOverlay.hidden { opacity:0; visibility:hidden; pointer-events:none; }

  #enterPanel {
    width:100%; max-width:520px; padding:36px; border-radius:14px; text-align:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: 0 18px 48px rgba(2,6,20,0.6);
    display:flex; gap:18px; align-items:center; justify-content:center; flex-direction:column;
  }
  #enterBtn { font-family:inherit; font-size:18px; padding:18px 28px; border-radius:12px; background:linear-gradient(90deg,var(--accent),var(--accent-strong)); border:none; color:white; cursor:pointer; box-shadow:0 12px 44px rgba(186,9,99,0.14); }

  /* coin pop */
  .intro-coin { transform-origin:center; animation: coinPop 700ms cubic-bezier(.2,.9,.2,1); filter: drop-shadow(0 18px 48px rgba(186,9,99,0.12)); }
  @keyframes coinPop { 0%{ transform: scale(1) rotate(0deg);} 40%{ transform: scale(1.6) rotate(90deg);} 80%{ transform: scale(1.1) rotate(270deg);} 100%{ transform: scale(1) rotate(360deg);} }

  /* chip + toast (chips still used for wins, but removed from enter flow) */
  .chip { position:fixed; width:18px; height:18px; border-radius:6px; background:linear-gradient(180deg,#fff,#eee); border:2px solid rgba(16,33,110,0.12); box-shadow: 0 6px 18px rgba(16,33,110,0.12); z-index:99999; pointer-events:none; transform:translateY(0) rotate(0deg); will-change: transform, opacity; }
  #kb-toast{ position:fixed; left:50%; bottom:28px; transform:translateX(-50%); padding:8px 12px; border-radius:10px; background: linear-gradient(90deg, rgba(186,9,99,0.12), rgba(4,8,24,0.12)); color:var(--soft-white); font-family:monospace; z-index:99999; opacity:0; transition:opacity .25s; }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce) { .roulette img, .chip, #particle-layer * { animation:none !important; transition:none !important; } body.creep::before { animation:none !important; } .intro-coin { animation:none !important; } }

  /* responsive */
  @media (max-width:740px){ :root { --avatar-size:84px; --card-padding:18px; --scrollbar-width: 12px; } .links { grid-template-columns: 1fr; padding-right: calc(var(--scrollbar-width) + 16px); } .small-reel { width:100px; height:64px; } .small-symbol { height:64px; } .small-spin { min-width: 90px; } #enterPanel { padding:24px; } }
  </style>
</head>
<body>
  <div id="particle-layer" aria-hidden="true"></div>

  <div id="app" role="main" aria-label="Kenzie Ford">
    <main class="card hidden" id="mainCard" role="region" aria-label="Profile card">
      <!-- coin in corner -->
      <div class="roulette" title="Lucky coin" aria-hidden="false">
        <img id="cornerCoinImg" src="coin.png" alt="coin"/>
      </div>

      <header class="header">
        <div class="avatar" title="Avatar">
          <img src="https://paa.ge/_next/image?url=https%3A%2F%2Flamaco-medusa.s3.eu-west-3.amazonaws.com%2F1760588927392-header-yz3HQ0.jpg&w=1920&q=75&dpl=dpl_51iekMun2Qd3ndP6hfGai6X55sXi" alt="avatar"/>
        </div>

        <div style="display:flex;align-items:center;gap:12px;flex-direction:column;">
          <div class="title">Kenzie Ford</div>
          <div class="subtitle">Streamer • Creator • Big Wins (im lying)</div>
        </div>

        <div style="margin-top:10px;">
          <span class="promo" aria-hidden="false">USE CODE <strong style="margin:0 6px;color:var(--soft-white)">SHAWTY</strong> — 100% LUCK</span>
        </div>
      </header>

      <!-- Links grid -->
      <section class="links" aria-label="Links">
        <a class="link" href="https://kick.com/mackenzie-fordd" target="_blank" rel="noopener" data-copy="https://kick.com/mackenzie-fordd">
          <div class="icon"><img src="kick.png" alt="Kick icon"/></div>
          <div class="meta"><div class="label">Kick</div><div class="desc">@mackenzie-fordd</div></div>
        </a>

        <a class="link" href="https://discord.com/invite/kenziesbasement" target="_blank" rel="noopener" data-copy="https://discord.com/invite/kenziesbasement">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/discord-logo.png" alt="Discord icon"/></div>
          <div class="meta"><div class="label">Discord</div><div class="desc">kenziesbasement</div></div>
        </a>

        <a class="link" href="https://www.rainbet.com/?r=shawty" target="_blank" rel="noopener" data-copy="https://www.rainbet.com/?r=shawty">
          <div class="icon"><img src="rain.png" alt="Rainbet/Casino icon"/></div>
          <div class="meta"><div class="label">RainBet (ref)</div><div class="desc">Get your bonus — use code SHAWTY</div></div>
        </a>

        <a class="link" href="https://www.snapchat.com/@mackenzief805" target="_blank" rel="noopener" data-copy="https://www.snapchat.com/@mackenzief805">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/snapchat.png" alt="Snapchat icon"/></div>
          <div class="meta"><div class="label">Snapchat</div><div class="desc">@mackenzief805</div></div>
        </a>

        <a class="link" href="https://www.roblox.com/users/4582742765/profile?friendshipSourceType=ProfileShare" target="_blank" rel="noopener" data-copy="https://www.roblox.com/users/4582742765/profile?friendshipSourceType=ProfileShare">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/roblox.png" alt="Roblox icon"/></div>
          <div class="meta"><div class="label">Roblox</div><div class="desc">Profile • Add me</div></div>
        </a>

        <a class="link" href="https://www.youtube.com/@kenzibettz" target="_blank" rel="noopener" data-copy="https://www.youtube.com/@kenzibettz">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/youtube-play.png" alt="YouTube icon"/></div>
          <div class="meta"><div class="label">YouTube</div><div class="desc">@kenzibettz</div></div>
        </a>

        <a class="link" href="https://www.tiktok.com/@mackenzie._.fordd?_t=ZT-90aXDzvWnyx&_r=1" target="_blank" rel="noopener" data-copy="https://www.tiktok.com/@mackenzie._.fordd">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/tiktok.png" alt="TikTok icon"/></div>
          <div class="meta"><div class="label">TikTok</div><div class="desc">@mackenzie._.fordd</div></div>
        </a>

        <a class="link" href="https://www.instagram.com/mackenzie._.fordd" target="_blank" rel="noopener" data-copy="https://www.instagram.com/mackenzie._.fordd">
          <div class="icon"><img src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" alt="Instagram icon"/></div>
          <div class="meta"><div class="label">Instagram</div><div class="desc">@mackenzie._.fordd</div></div>
        </a>
      </section>

      <!-- PLAYER (kept) -->
      <div style="width:100%; display:flex; align-items:center; justify-content:center; gap:18px; flex-wrap:wrap;">
        <div class="player" aria-label="Audio player" style="align-items:center;">
          <audio id="bg-audio" preload="auto" playsinline loop></audio>
          <div class="volume" title="Set volume" style="margin-left:8px;">
            <svg width="18" height="18" viewBox="0 0 24 24" style="opacity:0.95;margin-left:4px;"><path fill="var(--accent-strong)" d="M3 10v4h4l5 4V6L7 10H3z"></path></svg>
            <input id="volumeSlider" aria-label="Volume slider" type="range" min="0" max="1" step="0.01" value="0.32"/>
            <div id="volLabel" style="font-size:12px;color:var(--muted);min-width:36px;text-align:right;">32%</div>
          </div>
        </div>
      </div>

      <!-- SINGLE inline big slot (kept) -->
      <div class="big-slot-inline" aria-label="Big inline slot (single)" role="region">
        <div class="small-reel" id="inlineReel1"><div class="strip" aria-hidden="false"></div></div>
        <div class="small-reel" id="inlineReel2"><div class="strip" aria-hidden="false"></div></div>
        <div class="small-reel" id="inlineReel3"><div class="strip" aria-hidden="false"></div></div>
        <button id="bigSpinBtnInline" class="small-spin" aria-label="Spin the inline slot">SPIN</button>
      </div>

      <footer class="footer" role="contentinfo">
        <div>Made with ♥ by <strong style="color:var(--accent)">The Mods</strong></div>
        <div>
          <a href="#" id="copyCard" title="Copy profile link" style="color:var(--muted);text-decoration:none;">Copy link</a> •
          <a href="#" id="toggleRain" title="Toggle coin spin" style="color:var(--muted);text-decoration:none;">Toggle vibe</a>
        </div>
      </footer>
    </main>
  </div>

  <!-- enter overlay — only this visible on load -->
  <div id="enterOverlay" role="dialog" aria-label="Enter" aria-modal="true">
    <div id="enterPanel" aria-hidden="false">
      <div style="font-size:20px;font-weight:700;">Enter the Basement</div>
      <div style="color:var(--muted);font-size:13px;">Click to enter — 18+ • Play responsibly</div>
      <button id="enterBtn" aria-label="click to enter">Enter the Basement</button>
    </div>
  </div>

  <div id="kb-toast" role="status" aria-live="polite"></div>

<script>
/* helpers */
const $ = (s, ctx=document) => ctx.querySelector(s);
const $$ = (s, ctx=document) => Array.from((ctx||document).querySelectorAll(s));

/* subtle particle sparks (kept) */
(function particleGen(){
  const layer = document.getElementById('particle-layer');
  if(!layer) return;
  if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
  function spawn(){
    const p = document.createElement('div');
    const size = 6 + Math.random()*12;
    p.style.width = p.style.height = size + 'px';
    p.style.borderRadius = '50%';
    p.style.position = 'absolute';
    p.style.left = (10 + Math.random()*80) + '%';
    p.style.top = (80 + Math.random()*20) + '%';
    p.style.pointerEvents = 'none';
    p.style.zIndex = '2';
    p.style.background = Math.random() > 0.6 ? 'rgba(255,43,119,0.16)' : 'rgba(255,255,255,0.06)';
    p.style.filter = 'blur(6px)';
    layer.appendChild(p);
    const dx = (Math.random()*200 - 100);
    const dy = -(220 + Math.random()*280);
    const dur = 2000 + Math.random()*1800;
    p.animate([
      { transform: 'translate(0,0) scale(0.6)', opacity: 0 },
      { transform: `translate(${dx}px, ${dy}px) scale(1.0)`, opacity: 1 },
      { transform: `translate(${dx*1.2}px, ${dy*1.2}px) scale(0.8)`, opacity: 0 }
    ], { duration: dur, easing:'cubic-bezier(.2,.9,.2,1)', iterations:1, fill:'forwards' });
    setTimeout(()=> p.remove(), dur+80);
    setTimeout(spawn, 300 + Math.random()*900);
  }
  for(let i=0;i<6;i++) setTimeout(spawn, 160 * i + Math.random()*400);
})();

/* chip emitter utility (keeps for slot win usage, but NOT used on enter) */
function emitChipsSimple(count=8, spreadTop=78){
  for(let i=0;i<count;i++){
    const chip = document.createElement('div');
    chip.className = 'chip';
    chip.style.left = (50 + (Math.random()*40-20)) + '%';
    chip.style.top = (spreadTop + Math.random()*6) + '%';
    chip.style.position = 'fixed';
    chip.style.zIndex = 10001;
    chip.style.width = '18px';
    chip.style.height = '18px';
    chip.style.borderRadius = '6px';
    chip.style.background = 'linear-gradient(180deg,#fff,#eee)';
    chip.style.border = '2px solid rgba(16,33,110,0.12)';
    chip.style.boxShadow = '0 6px 18px rgba(16,33,110,0.12)';
    document.body.appendChild(chip);
    const dx = (Math.random()*240 - 120);
    const dy = - (140 + Math.random()*260);
    const rot = Math.random()*720 - 360;
    chip.animate([
      { transform: 'translate(0,0) rotate(0deg)', opacity:1 },
      { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity:0 }
    ], {
      duration: 900 + Math.random()*700,
      easing: 'cubic-bezier(.2,.9,.2,1)',
      iterations: 1,
      fill: 'forwards'
    });
    setTimeout(()=> chip.remove(), 1800);
  }
}

/* audio logic (preserved) */
(function audioPlayer(){
  const audio = document.getElementById('bg-audio');
  const volumeSlider = document.getElementById('volumeSlider');
  const volLabel = document.getElementById('volLabel');

  const CANDIDATES = [
    { url: 'https://r2.guns.lol/500e1951-26df-4843-8d3e-4c146191259d.mp3', type: 'audio/mpeg' },
  ];

  function setVolume(v){
    if(volumeSlider) audio.volume = v;
    if(volLabel) volLabel.textContent = Math.round(v*100) + '%';
    audio.muted = false;
  }
  if(document.getElementById('volumeSlider')) setVolume(parseFloat(document.getElementById('volumeSlider').value || 0.32));
  if(document.getElementById('volumeSlider')){
    document.getElementById('volumeSlider').addEventListener('input', e => setVolume(parseFloat(e.target.value)));
  }

  function mimeSupported(mime){
    try { const r = audio.canPlayType(mime); return r === 'probably' || r === 'maybe'; } catch(e){ return false; }
  }

  async function findAndLoadSources(){
    const loaded = [];
    for(const c of CANDIDATES){
      if(!c || !c.url) continue;
      if(!mimeSupported(c.type)) continue;
      try {
        const res = await fetch(c.url, { method:'HEAD', cache:'no-cache' });
        if(res.ok) loaded.push(c.url);
      } catch(e){
        loaded.push(c.url);
      }
    }
    return loaded;
  }

  async function playFromUserGesture(){
    try {
      const chosen = await findAndLoadSources();
      if(!chosen || chosen.length === 0) return false;
      audio.src = chosen[0];
      try { await audio.play(); return true; } catch(err){ console.warn('Playback failed', err); return false; }
    } catch(e){ console.error('playFromUserGesture err', e); return false; }
  }

  let audioUnlocked = false;
  async function unlockAudioOnGesture(){
    if(audioUnlocked) return;
    try {
      const AC = window.AudioContext || window.webkitAudioContext;
      if(AC){
        const ctx = new AC();
        if(ctx.state === 'suspended') await ctx.resume();
        const b = ctx.createBuffer(1, 1, 22050);
        const src = ctx.createBufferSource();
        src.buffer = b;
        src.connect(ctx.destination);
        src.start(0);
      }
      audioUnlocked = true;
    } catch(e){ audioUnlocked = true; }
  }
  document.body.addEventListener('pointerdown', unlockAudioOnGesture, {once:true, passive:true});
  window._bio_audio_playFromUserGesture = playFromUserGesture;
})();

/* slot logic (kept) */
(function inlineBigSlot(){
  const symbolImages = ['https://github.com/kenzibets/socials/raw/main/green.png','https://github.com/kenzibets/socials/raw/main/red.png','https://github.com/kenzibets/socials/raw/main/white.png'];
  const strips = [
    document.querySelector('#inlineReel1 .strip'),
    document.querySelector('#inlineReel2 .strip'),
    document.querySelector('#inlineReel3 .strip')
  ];
  const btn = document.getElementById('bigSpinBtnInline');
  if(!strips[0] || !btn) return;
  const symbolHeight = 72;
  const loops = 8;

  function buildStrip(stripEl){
    stripEl.innerHTML = '';
    for(let l=0; l<loops; l++){
      for(const img of symbolImages){
        const d = document.createElement('div');
        d.className = 'small-symbol';
        const i = document.createElement('img');
        i.src = img;
        i.alt = '';
        d.appendChild(i);
        stripEl.appendChild(d);
      }
    }
  }
  strips.forEach(buildStrip);

  function randIndex(){ return Math.floor(Math.random() * symbolImages.length); }

  btn.addEventListener('click', async ()=>{
    btn.disabled = true;
    btn.textContent = 'Spinning...';
    const res = [randIndex(), randIndex(), randIndex()];
    strips.forEach((stripEl, i)=>{
      const targetPos = (loops * symbolImages.length + res[i]) * symbolHeight;
      stripEl.style.transition = `transform ${1.0 + i*0.25}s cubic-bezier(.2,.9,.2,1)`;
      requestAnimationFrame(()=> stripEl.style.transform = `translateY(-${targetPos}px)`);
    });
    await new Promise(r=> setTimeout(r, 1400 + 600));
    strips.forEach((stripEl, i)=>{
      stripEl.style.transition = 'none';
      stripEl.innerHTML = '';
      const idx = res[i];
      const arr = [ symbolImages[idx], symbolImages[(idx+1) % symbolImages.length], symbolImages[(idx+2) % symbolImages.length], symbolImages[(idx+3) % symbolImages.length] ];
      for(const img of arr.concat(symbolImages.slice(0,2))){
        const d = document.createElement('div');
        d.className = 'small-symbol';
        const im = document.createElement('img');
        im.src = img; im.alt = '';
        d.appendChild(im);
        stripEl.appendChild(d);
      }
      stripEl.style.transform = 'translateY(0)';
    });
    btn.disabled = false;
    btn.textContent = 'SPIN';
    const win = res[0] === res[1] && res[1] === res[2];
    if(win){ quickToast('JACKPOT! SHAWTY did it — big win!', 3000); emitChipsSimple(18, 68); } else { quickToast('No match — try again! Use SHAWTY for better luck.', 2000); }
  });

  function quickToast(msg, t=1800){
    let el = document.getElementById('kb-toast');
    if(!el){
      el = document.createElement('div');
      el.id = 'kb-toast';
      el.style.position='fixed';
      el.style.bottom='28px';
      el.style.left='50%';
      el.style.transform='translateX(-50%)';
      el.style.background='linear-gradient(90deg, rgba(186,9,99,0.12), rgba(16,33,110,0.12))';
      el.style.border='1px solid rgba(186,9,99,0.12)';
      el.style.color='var(--soft-white)';
      el.style.padding='8px 12px';
      el.style.borderRadius='10px';
      el.style.zIndex=99999;
      el.style.fontFamily='monospace';
      document.body.appendChild(el);
    }
    el.textContent = msg;
    el.style.opacity = '1';
    setTimeout(()=> el.style.opacity = '0', t);
  }
})();

/* UI flow: overlay-only first, then creep animation, then reveal the page
   NOTE: removed the chip burst on enter (no white squares) */
(function uiFlow(){
  const enterOverlay = document.getElementById('enterOverlay');
  const enterBtn = document.getElementById('enterBtn');
  const mainCard = document.getElementById('mainCard');
  const coinImg = document.getElementById('cornerCoinImg');
  const links = Array.from(document.querySelectorAll('.link'));

  function revealLinksStagger(){
    links.forEach((el, idx)=>{
      setTimeout(()=> el.classList.add('visible'), 90 * idx);
    });
  }

  enterBtn.addEventListener('click', async (e) => {
    enterBtn.disabled = true;

    // add the "creep" class which animates the background (CSS handled)
    document.body.classList.add('creep');

    // coin pop visual during creep (keeps coin pop, but no chip burst)
    if(coinImg) coinImg.classList.add('intro-coin');

    // try to start audio as before
    try { if(window._bio_audio_playFromUserGesture) await window._bio_audio_playFromUserGesture(); } catch(e){ console.warn('audio start failed', e); }

    // wait for the creep animation to mostly finish (matches CSS 1600ms)
    await new Promise(r => setTimeout(r, 1600 + 260));

    // remove temporary intro coin state
    if(coinImg) coinImg.classList.remove('intro-coin');
    // remove creep class after a short moment (keeps DOM tidy)
    setTimeout(()=> document.body.classList.remove('creep'), 300);

    // hide overlay and reveal main UI
    enterOverlay.classList.add('hidden');
    mainCard.classList.remove('hidden');
    mainCard.classList.add('revealed');

    // stagger link reveal
    revealLinksStagger();
  });

  // context copy for links
  document.querySelectorAll('.link').forEach(tile=>{
    tile.addEventListener('contextmenu', e=>{
      e.preventDefault();
      const url = tile.dataset.copy || tile.href;
      navigator.clipboard?.writeText(url).then(()=> quickToast('Copied: ' + url));
    });
  });

  // reveal if overlay already hidden on load
  document.addEventListener('DOMContentLoaded', ()=>{
    const enter = document.getElementById('enterOverlay');
    if(!enter || enter.style.display === 'none' || enter.classList.contains('hidden')){
      revealLinksStagger();
      mainCard.classList.remove('hidden');
      mainCard.classList.add('revealed');
    }
  });

  function quickToast(msg, t=1400){
    let el = document.getElementById('kb-toast');
    if(!el){
      el = document.createElement('div');
      el.id = 'kb-toast';
      el.style.position='fixed';
      el.style.bottom='28px';
      el.style.left='50%';
      el.style.transform='translateX(-50%)';
      el.style.padding='8px 12px';
      el.style.borderRadius='10px';
      el.style.background='linear-gradient(90deg, rgba(186,9,99,0.12), rgba(16,33,110,0.12))';
      el.style.border='1px solid rgba(186,9,99,0.12)';
      el.style.color='var(--soft-white)';
      el.style.zIndex=99999;
      el.style.fontFamily='monospace';
      el.style.opacity=0;
      el.style.transition='opacity .2s';
      document.body.appendChild(el);
    }
    el.textContent = msg;
    el.style.opacity = '1';
    setTimeout(()=> el.style.opacity = '0', t);
  }
})();

/* global quickToast */
function quickToast(msg, t=1600){
  let el = document.getElementById('kb-toast');
  if(!el){
    el = document.createElement('div');
    el.id = 'kb-toast';
    el.style.position='fixed';
    el.style.bottom='28px';
    el.style.left='50%';
    el.style.transform='translateX(-50%)';
    el.style.padding='8px 12px';
    el.style.borderRadius='10px';
    el.style.background='linear-gradient(90deg, rgba(186,9,99,0.12), rgba(4,8,24,0.12))';
    el.style.color='white';
    el.style.zIndex=99999;
    el.style.fontFamily='monospace';
    el.style.opacity=0;
    el.style.transition='opacity .2s';
    document.body.appendChild(el);
  }
  el.textContent = msg; el.style.opacity = '1';
  setTimeout(()=> el.style.opacity = '0', t);
}
</script>
</body>
</html>
